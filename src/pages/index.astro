---
import { getCollection } from 'astro:content';
import Button from '../components/Button.astro';
import PostCard from '../components/PostCard.astro';
import BaseLayout from '../layouts/BaseLayout.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../consts';

const posts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<section class="max-w-3xl mx-auto text-center py-12 px-4">
		<h1 class="text-5xl font-bold mb-4">Mateusz Kędzia</h1>
		<p class="text-xl text-gray-600 mb-8">
			AI/ML Engineer & Research Scientist specializing in autonomous agents, LLM-powered applications, and scalable AI systems. Building intelligent solutions at the intersection of research and production.
		</p>
		<div class="flex flex-wrap gap-4 justify-center">
			<Button href="/blog" variant="primary">Blog</Button>
			<Button href="/cv/index.html" variant="secondary">View CV</Button>
			<Button href="/cv/index.zh.html" variant="outline">中文简历</Button>
		</div>
	</section>

	<section class="max-w-3xl mx-auto px-4 py-8">
		<h2 class="text-3xl font-bold mb-6">Latest Posts</h2>
		<ul class="space-y-6">
			{posts.map((post) => (
				<PostCard 
					href={`/blog/${post.id}/`}
					title={post.data.title}
					description={post.data.description}
					pubDate={post.data.pubDate}
				/>
			))}
		</ul>
		<div class="mt-8 text-center">
			<a href="/blog" class="text-blue-600 hover:underline">
				View all posts →
			</a>
		</div>
	</section>
</BaseLayout>
