---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { SITE_DESCRIPTION, SITE_TITLE } from '../../consts';

const cvs = await getCollection('cv');
const sortedCvs = cvs.sort((a, b) => {
	// Sort: English first, then Chinese
	if (a.data.language === 'en' && b.data.language === 'zh') return -1;
	if (a.data.language === 'zh' && b.data.language === 'en') return 1;
	return 0;
});
---

<BaseLayout title={`Resume - ${SITE_TITLE}`} description={SITE_DESCRIPTION}>
	<section class="container py-12">
		<div class="max-w-5xl mx-auto space-y-8">
			<h1 class="scroll-m-20 text-4xl font-extrabold tracking-tight lg:text-5xl">Resume</h1>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
				{sortedCvs.map((cv) => (
					<a 
						href={`/cv/${cv.id}/`}
						class="block p-6 rounded-lg border border-border bg-card hover:bg-accent transition-colors text-center"
					>
						<h2 class="text-2xl font-bold">
							{cv.data.language === 'en' ? 'English' : '中文'}
						</h2>
					</a>
				))}
			</div>
		</div>
	</section>
</BaseLayout>

